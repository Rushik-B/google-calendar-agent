{"ast":null,"code":"var _jsxFileName = \"/Users/Rushik/Documents/Projects/caledar-example/Calendar-app-latest-working/src/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\n\n// Define the script at global level to ensure the functions are globally accessible\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst setupGlobalFunctions = () => {\n  if (typeof window !== 'undefined') {\n    // Create a custom event for scheduling breaks\n    window.scheduleBreak = (startTime, endTime) => {\n      console.log(\"scheduleBreak called with:\", startTime, endTime);\n      // Dispatch a custom event that the React component can listen for\n      window.dispatchEvent(new CustomEvent('scheduleCalendarItem', {\n        detail: {\n          type: 'break',\n          startTime,\n          endTime\n        }\n      }));\n    };\n\n    // Create a custom event for scheduling tasks  \n    window.scheduleTask = (startTime, endTime) => {\n      console.log(\"scheduleTask called with:\", startTime, endTime);\n      window.dispatchEvent(new CustomEvent('scheduleCalendarItem', {\n        detail: {\n          type: 'task',\n          startTime,\n          endTime\n        }\n      }));\n    };\n\n    // Log to verify functions are attached\n    console.log(\"Global scheduling functions attached:\", typeof window.scheduleBreak === 'function', typeof window.scheduleTask === 'function');\n  }\n};\nfunction NaturalLanguageForm() {\n  _s();\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  // eslint-disable-next-line no-unused-vars\n  const [availableSlots, setAvailableSlots] = useState([]);\n  const [calendarEvents, setCalendarEvents] = useState([]);\n  const [existingEvents, setExistingEvents] = useState([]);\n  const [showCalendar, setShowCalendar] = useState(false);\n  const [eventDetails, setEventDetails] = useState({});\n  const [selectedSlots, setSelectedSlots] = useState([]);\n\n  // Call the setup function on load\n  useEffect(() => {\n    setupGlobalFunctions();\n  }, []);\n  const [calendars, setCalendars] = useState([]);\n  const [selectedCalendars, setSelectedCalendars] = useState([]);\n  const [dateRange, setDateRange] = useState({\n    start: new Date(),\n    end: new Date(new Date().setDate(new Date().getDate() + 7))\n  });\n\n  // Define handleSubmit with useCallback before it's used in handleScheduleItem\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n    console.log(\"handleSubmit called with text:\", text);\n    if (!text.trim()) return;\n    setLoading(true);\n    setError(\"\");\n    setMessage(\"\");\n    setAvailableSlots([]);\n    setCalendarEvents([]);\n    setSelectedSlots([]);\n    setShowCalendar(false);\n    try {\n      console.log(\"Making API call with text:\", text);\n      const response = await axios.post('http://127.0.0.1:5000/api/natural-language-event', {\n        text\n      });\n      console.log(\"API response:\", response.data);\n      if (response.data.success) {\n        // Use humanizedResponse from backend if available\n        if (response.data.humanizedResponse) {\n          if (response.data.intent === \"check_free_time\") {\n            // For check_free_time intent, we need to render HTML\n            setMessage('');\n            // Use a timeout to ensure state updates don't conflict\n            setTimeout(() => {\n              const messageElement = document.querySelector('.success-message');\n              if (messageElement) {\n                messageElement.innerHTML = response.data.humanizedResponse;\n              } else {\n                // Fallback in case the element isn't found\n                setMessage(response.data.humanizedResponse);\n              }\n            }, 10);\n            setText(\"\");\n          } else {\n            // For other intents, just set the text message\n            setMessage(response.data.humanizedResponse);\n          }\n        }\n        if (response.data.intent === \"find_time\") {\n          setAvailableSlots(response.data.availableSlots);\n          setCalendarEvents(response.data.events || []);\n          setShowCalendar(true);\n\n          // Check if we have the insufficientTime flag\n          if (response.data.insufficientTime) {\n            // eslint-disable-next-line no-unused-vars\n            const requestedHours = response.data.requestedHours;\n            // eslint-disable-next-line no-unused-vars\n            const foundHours = response.data.foundHours;\n            // Use the humanizedResponse for error message if available\n            setError(`INSUFFICIENT TIME: ${response.data.humanizedResponse || response.data.message} Select these slots or try a different timeframe.`);\n          } else if (!response.data.humanizedResponse) {\n            // Only set this default message if humanizedResponse wasn't already set\n            setMessage(\"Here are suggested time slots on your calendar. Click on slots to select/deselect them for scheduling.\");\n          }\n          setEventDetails({\n            summary: getEventSummaryFromText(text),\n            description: text,\n            calendarId: \"primary\"\n          });\n        } else if (response.data.intent === \"view_events\") {\n          // Just display the humanized response for view_events, no calendar needed\n          setText(\"\");\n        } else if (response.data.intent === \"Create event\" && !response.data.humanizedResponse) {\n          // Fallback for create event if no humanizedResponse is available\n          setMessage(`Event created! ${response.data.eventLink ? `View it here: ${response.data.eventLink}` : ''}`);\n          setText(\"\");\n        } else {\n          // For other intents or if we already set humanizedResponse\n          setText(\"\");\n        }\n      } else {\n        setError(`Error: ${response.data.humanizedResponse || response.data.message}`);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setError(`Error: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  }, [text, setLoading, setError, setMessage, setAvailableSlots, setCalendarEvents, setSelectedSlots, setShowCalendar, setText, setEventDetails]);\n\n  // Event handler for scheduling items - using useCallback to avoid dependency issues\n  const handleScheduleItem = useCallback(event => {\n    console.log(\"Custom event received:\", event.detail);\n    const {\n      type,\n      startTime,\n      endTime\n    } = event.detail;\n    const startDate = new Date();\n    const formattedDate = startDate.toLocaleDateString('en-US', {\n      month: 'long',\n      day: 'numeric',\n      year: 'numeric'\n    });\n    if (type === 'break') {\n      const newText = `Schedule a break on ${formattedDate} from ${startTime} to ${endTime}`;\n      console.log(\"Setting text for break:\", newText);\n      setText(newText);\n      // Submit after React has updated the state\n      setTimeout(() => {\n        handleSubmit({\n          preventDefault: () => {}\n        });\n      }, 50);\n    } else if (type === 'task') {\n      // Show prompt for task name\n      const taskName = prompt(\"What would you like to name this task?\", \"Work Session\");\n      if (taskName) {\n        const newText = `Schedule ${taskName} on ${formattedDate} from ${startTime} to ${endTime}`;\n        console.log(\"Setting text for task:\", newText);\n        setText(newText);\n        // Submit after React has updated the state\n        setTimeout(() => {\n          handleSubmit({\n            preventDefault: () => {}\n          });\n        }, 50);\n      }\n    }\n  }, [setText, handleSubmit]);\n\n  // Set up event listeners\n  useEffect(() => {\n    window.addEventListener('scheduleCalendarItem', handleScheduleItem);\n\n    // Clean up event listener\n    return () => {\n      window.removeEventListener('scheduleCalendarItem', handleScheduleItem);\n    };\n  }, [handleScheduleItem]);\n\n  // Fetch all calendars and current preferences on mount\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        console.log(\"Attempting to fetch calendars...\");\n        // Fetch all calendars\n        const calendarsResponse = await axios.get('http://127.0.0.1:5000/api/get-calendars').catch(error => {\n          console.error(\"Calendar fetch error details:\", error.message);\n          if (error.response) console.error(\"Response data:\", error.response.data);\n          throw new Error(`Failed to fetch calendars: ${error.message}`);\n        });\n        console.log(\"Calendars response:\", calendarsResponse);\n        if (!calendarsResponse.data.success) {\n          throw new Error(`Failed to fetch calendars: ${calendarsResponse.data.message || 'Unknown error'}`);\n        }\n        const allCalendars = calendarsResponse.data.calendars;\n        setCalendars(allCalendars);\n        console.log(\"Attempting to fetch preferred calendars...\");\n        // Fetch current preferred calendars\n        const prefsResponse = await axios.get('http://127.0.0.1:5000/api/get-preferred-calendars').catch(error => {\n          console.error(\"Preferences fetch error details:\", error.message);\n          if (error.response) console.error(\"Response data:\", error.response.data);\n          throw new Error(`Failed to fetch preferred calendars: ${error.message}`);\n        });\n        console.log(\"Preferences response:\", prefsResponse);\n        if (!prefsResponse.data.success) {\n          throw new Error(`Failed to fetch preferred calendars: ${prefsResponse.data.message || 'Unknown error'}`);\n        }\n        const preferredCals = prefsResponse.data.calendars;\n\n        // If there are saved preferences, use them; otherwise, default to primary\n        if (preferredCals.length > 0) {\n          // Ensure the saved preferences match the full calendar data (e.g., include all fields)\n          const syncedPrefs = preferredCals.map(pref => allCalendars.find(cal => cal.id === pref.id) || pref);\n          setSelectedCalendars(syncedPrefs);\n        } else {\n          const primaryCal = allCalendars.find(cal => cal.primary);\n          if (primaryCal) {\n            setSelectedCalendars([primaryCal]);\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError(`Error loading calendars or preferences: ${error.message}`);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Send preferences to backend only when user changes them\n  useEffect(() => {\n    if (selectedCalendars.length > 0) {\n      const sendPreferences = async () => {\n        try {\n          const response = await axios.post('http://127.0.0.1:5000/api/set-preferred-calendars', {\n            calendars: selectedCalendars\n          });\n          if (!response.data.success) {\n            throw new Error(response.data.message);\n          }\n        } catch (error) {\n          console.error('Error setting preferred calendars:', error);\n          setError('Error saving calendar preferences.');\n        }\n      };\n      sendPreferences();\n    }\n  }, [selectedCalendars]);\n  const fetchExistingEvents = useCallback(async () => {\n    try {\n      const startDate = formatDate(dateRange.start);\n      const endDate = formatDate(dateRange.end);\n      const response = await axios.get(`http://127.0.0.1:5000/api/get-events?start=${startDate}&end=${endDate}`);\n      if (response.data.success) {\n        // Make sure each event has existingEvent flag and preserve calendar color\n        const eventsWithMetadata = response.data.events.map(event => ({\n          ...event,\n          existingEvent: true,\n          // If the event doesn't already have these properties, add them\n          backgroundColor: event.backgroundColor || getCalendarColor(event.calendarId),\n          borderColor: event.borderColor || getCalendarColor(event.calendarId, true),\n          textColor: event.textColor || '#ffffff'\n        }));\n        setExistingEvents(eventsWithMetadata);\n      } else {\n        console.error('Error fetching events:', response.data.message);\n      }\n    } catch (error) {\n      console.error('Error fetching events:', error);\n    }\n  }, [dateRange, calendars]);\n\n  // Helper function to get color for a specific calendar\n  const getCalendarColor = (calendarId, darker = false) => {\n    // Find the calendar in our list\n    const calendar = calendars.find(cal => cal.id === calendarId);\n    if (calendar && calendar.backgroundColor) {\n      if (darker) {\n        // Create a slightly darker version for the border\n        return darkenColor(calendar.backgroundColor, 0.2);\n      }\n      return calendar.backgroundColor;\n    }\n    // Default color if calendar not found\n    return darker ? '#1a73e8' : '#4285f4';\n  };\n\n  // Helper function to darken a color\n  const darkenColor = (color, amount) => {\n    try {\n      // Remove the hash if it exists\n      color = color.replace('#', '');\n\n      // Parse the color\n      let r = parseInt(color.substring(0, 2), 16);\n      let g = parseInt(color.substring(2, 4), 16);\n      let b = parseInt(color.substring(4, 6), 16);\n\n      // Darken the color\n      r = Math.max(0, Math.floor(r * (1 - amount)));\n      g = Math.max(0, Math.floor(g * (1 - amount)));\n      b = Math.max(0, Math.floor(b * (1 - amount)));\n\n      // Convert back to hex\n      return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n    } catch (e) {\n      console.error('Error darkening color:', e);\n      return color; // Return original color if there's an error\n    }\n  };\n\n  // Fetch existing events when dateRange changes or when viewing calendar\n  useEffect(() => {\n    if (showCalendar) {\n      fetchExistingEvents();\n    }\n  }, [dateRange, showCalendar, fetchExistingEvents]);\n  const formatDate = date => {\n    const d = new Date(date);\n    let month = '' + (d.getMonth() + 1);\n    let day = '' + d.getDate();\n    const year = d.getFullYear();\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n    return [year, month, day].join('-');\n  };\n  const handleCalendarSelect = cal => {\n    setSelectedCalendars(prev => {\n      if (prev.some(selected => selected.id === cal.id)) {\n        return prev.filter(selected => selected.id !== cal.id);\n      } else {\n        return [...prev, cal];\n      }\n    });\n  };\n  const getEventSummaryFromText = text => {\n    const firstSentence = text.split('.')[0];\n    if (firstSentence.length <= 50) return firstSentence;\n    return firstSentence.substring(0, 50) + '...';\n  };\n  const handleEventClick = info => {\n    const {\n      event\n    } = info;\n\n    // Only handle suggested slots\n    if (event.extendedProps.suggestedSlot) {\n      const eventData = {\n        start: event.start.toISOString(),\n        end: event.end.toISOString()\n      };\n\n      // Toggle selection\n      setSelectedSlots(prev => {\n        const isAlreadySelected = prev.some(slot => slot.start === eventData.start && slot.end === eventData.end);\n        if (isAlreadySelected) {\n          // Remove from selection\n          return prev.filter(slot => !(slot.start === eventData.start && slot.end === eventData.end));\n        } else {\n          // Add to selection\n          return [...prev, eventData];\n        }\n      });\n\n      // Update event color based on selection\n      const isSelected = !selectedSlots.some(slot => slot.start === eventData.start && slot.end === eventData.end);\n      if (isSelected) {\n        event.setProp('backgroundColor', '#4caf50');\n        event.setProp('borderColor', '#2e7d32');\n        event.setProp('title', 'Selected Time');\n      } else {\n        event.setProp('backgroundColor', '#8bc34a');\n        event.setProp('borderColor', '#689f38');\n        event.setProp('title', 'Suggested Time');\n      }\n    } else {\n      // For existing events, show some details in a tooltip or alert\n      const eventTitle = event.title;\n      const eventTime = `${event.start.toLocaleTimeString()} - ${event.end.toLocaleTimeString()}`;\n      const calendarName = event.extendedProps.calendarName || 'Unknown Calendar';\n\n      // Simple alert for demonstration - in a real app, you might want a tooltip or modal\n      alert(`Event: ${eventTitle}\\nTime: ${eventTime}\\nCalendar: ${calendarName}`);\n    }\n  };\n  const calculateTotalHours = () => {\n    let totalMinutes = 0;\n    selectedSlots.forEach(slot => {\n      const start = new Date(slot.start);\n      const end = new Date(slot.end);\n      const diffMinutes = (end - start) / (1000 * 60);\n      totalMinutes += diffMinutes;\n    });\n    const hours = Math.floor(totalMinutes / 60);\n    const minutes = Math.floor(totalMinutes % 60);\n    return `${hours}h ${minutes}m`;\n  };\n  const handleScheduleSelected = async () => {\n    if (selectedSlots.length === 0) return;\n    setLoading(true);\n    try {\n      // Create multiple events, one for each selected slot\n      const promises = selectedSlots.map(slot => {\n        return axios.post('http://127.0.0.1:5000/api/schedule-selected-slot', {\n          selectedSlot: slot,\n          eventDetails\n        });\n      });\n      const results = await Promise.all(promises);\n      const allSuccessful = results.every(r => r.data.success);\n      if (allSuccessful) {\n        setMessage(`All ${selectedSlots.length} events scheduled successfully!`);\n        setText(\"\");\n        setShowCalendar(false);\n        setAvailableSlots([]);\n        setCalendarEvents([]);\n        setSelectedSlots([]);\n      } else {\n        setError(`Error: Some events could not be scheduled.`);\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      setError(`Error: ${((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFindDifferentTimes = () => {\n    setMessage(\"Let's find another time. Please provide more details:\");\n    setShowCalendar(false);\n    setAvailableSlots([]);\n    setCalendarEvents([]);\n    setSelectedSlots([]);\n  };\n  const handleDatesSet = dateInfo => {\n    setDateRange({\n      start: dateInfo.start,\n      end: dateInfo.end\n    });\n  };\n  const getAllEvents = () => {\n    // Start with existing events, preserving their properties\n    const allEvents = [...existingEvents];\n\n    // Add suggested slots with updated colors based on selection\n    if (calendarEvents.length > 0) {\n      calendarEvents.forEach(event => {\n        const isSelected = selectedSlots.some(slot => slot.start === event.start && slot.end === event.end);\n        allEvents.push({\n          ...event,\n          backgroundColor: isSelected ? '#4caf50' : '#8bc34a',\n          borderColor: isSelected ? '#2e7d32' : '#689f38',\n          textColor: '#ffffff',\n          title: isSelected ? 'Selected Time' : 'Suggested Time',\n          suggestedSlot: true // Mark as suggested slot for the event click handler\n        });\n      });\n    }\n    return allEvents;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"natural-language-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Create Event with Natural Language\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-selection\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Select Calendars to Monitor:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this), calendars.length > 0 ? calendars.map(cal => /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          margin: '5px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: selectedCalendars.some(selected => selected.id === cal.id),\n          onChange: () => handleCalendarSelect(cal),\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 15\n        }, this), cal.summary, \" \", cal.primary ? '(Primary)' : '']\n      }, cal.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading calendars...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 17\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-message\",\n      dangerouslySetInnerHTML: {\n        __html: message\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 19\n    }, this), !showCalendar ? /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Describe your event:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: text,\n          onChange: e => setText(e.target.value),\n          disabled: loading,\n          rows: 3,\n          placeholder: \"e.g., 'Schedule a team meeting next Tuesday at 2pm' or 'Find me time to work on my project tomorrow afternoon'\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"submit-button\",\n        children: loading ? 'Processing...' : 'Submit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-view\",\n      children: [selectedSlots.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selection-summary\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Selected \", selectedSlots.length, \" slot(s) - Total time: \", calculateTotalHours()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-legend\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"legend-color suggested-event-color\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Suggested Work Slots\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"legend-color selected-event-color\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Selected Work Slots\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-title\",\n            children: \"Your Calendars:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 15\n          }, this), selectedCalendars.map(cal => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"legend-color\",\n              style: {\n                backgroundColor: cal.backgroundColor || getCalendarColor(cal.id),\n                border: `1px solid ${cal.borderColor || getCalendarColor(cal.id, true)}`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: cal.summary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 19\n            }, this)]\n          }, cal.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-container\",\n        children: /*#__PURE__*/_jsxDEV(FullCalendar, {\n          plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n          initialView: \"timeGridWeek\",\n          headerToolbar: {\n            left: 'prev,next today',\n            center: 'title',\n            right: 'dayGridMonth,timeGridWeek,timeGridDay'\n          },\n          events: getAllEvents(),\n          eventClick: handleEventClick,\n          eventContent: renderEventContent,\n          height: \"800px\",\n          nowIndicator: true,\n          datesSet: handleDatesSet,\n          slotMinTime: \"00:00:00\",\n          slotMaxTime: \"24:00:00\",\n          eventTimeFormat: {\n            hour: 'numeric',\n            minute: '2-digit',\n            meridiem: 'short'\n          },\n          slotLabelFormat: {\n            hour: 'numeric',\n            minute: '2-digit',\n            hour12: true\n          },\n          allDaySlot: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleScheduleSelected,\n          disabled: selectedSlots.length === 0 || loading,\n          className: \"confirm-button\",\n          children: loading ? 'Scheduling...' : `Schedule ${selectedSlots.length} Selected Time${selectedSlots.length === 1 ? '' : 's'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleFindDifferentTimes,\n          disabled: loading,\n          className: \"reject-button\",\n          children: \"Find Different Times\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 520,\n    columnNumber: 5\n  }, this);\n}\n_s(NaturalLanguageForm, \"I0wfg5dqyvFascCoK933bmzAdTs=\");\n_c = NaturalLanguageForm;\nfunction renderEventContent(eventInfo) {\n  const isSuggested = eventInfo.event.extendedProps.suggestedSlot;\n  const isExisting = eventInfo.event.extendedProps.existingEvent;\n\n  // Format the time more cleanly\n  let timeText = eventInfo.timeText;\n  if (timeText.includes('-')) {\n    // Simplify time range display\n    const times = timeText.split('-');\n    timeText = times[0].trim() + ' - ' + times[1].trim();\n  }\n\n  // Get the calendar name if available\n  let calendarName = '';\n  if (isExisting && eventInfo.event.extendedProps.calendarName) {\n    calendarName = `(${eventInfo.event.extendedProps.calendarName})`;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `event-content ${isSuggested ? 'suggested-event' : 'existing-event'}`,\n    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n      children: timeText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n      children: [eventInfo.event.title, \" \", calendarName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 670,\n    columnNumber: 5\n  }, this);\n}\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"script\", {\n      dangerouslySetInnerHTML: {\n        __html: `\n          // Directly define functions in the global scope\n          window.scheduleBreak = function(startTime, endTime) {\n            console.log(\"DOM scheduleBreak called with:\", startTime, endTime);\n            if (window.dispatchEvent) {\n              window.dispatchEvent(\n                new CustomEvent('scheduleCalendarItem', {\n                  detail: {\n                    type: 'break',\n                    startTime,\n                    endTime\n                  }\n                })\n              );\n            }\n          };\n          \n          window.scheduleTask = function(startTime, endTime) {\n            console.log(\"DOM scheduleTask called with:\", startTime, endTime);\n            if (window.dispatchEvent) {\n              window.dispatchEvent(\n                new CustomEvent('scheduleCalendarItem', {\n                  detail: {\n                    type: 'task',\n                    startTime,\n                    endTime\n                  }\n                })\n              );\n            }\n          };\n          \n          // Duration selector functions\n          window.showDurationSelector = function(startTime, endTime, selectorId, displayId, sliderId) {\n            console.log(\"Showing duration selector\", selectorId);\n            const durationSelector = document.getElementById(selectorId);\n            if (durationSelector) {\n              durationSelector.style.display = 'block';\n            } else {\n              console.error(\"Duration selector element not found:\", selectorId);\n            }\n          };\n          \n          window.updateDurationDisplay = function(minutes, displayId) {\n            console.log(\"Updating duration display to\", minutes, \"for\", displayId);\n            const durationDisplay = document.getElementById(displayId);\n            if (!durationDisplay) {\n              console.error(\"Duration display element not found:\", displayId);\n              return;\n            }\n            \n            let display = \"\";\n            if (minutes >= 60) {\n              const hours = Math.floor(minutes / 60);\n              const remainingMinutes = minutes % 60;\n              display = hours + \" hour\" + (hours > 1 ? \"s\" : \"\");\n              if (remainingMinutes > 0) {\n                display += \" \" + remainingMinutes + \" min\";\n              }\n            } else {\n              display = minutes + \" min\";\n            }\n            durationDisplay.textContent = display;\n          };\n          \n          window.scheduleBreakWithDuration = function(startTime, endTime, sliderId) {\n            console.log(\"Scheduling break with duration using slider\", sliderId);\n            const durationSlider = document.getElementById(sliderId);\n            if (!durationSlider) {\n              console.error(\"Duration slider not found:\", sliderId);\n              return;\n            }\n            \n            const durationMinutes = durationSlider.value;\n            console.log(\"Duration selected:\", durationMinutes);\n            \n            const startDateTime = new Date();\n            const [startHours, startMinutes] = startTime.split(':').map(Number);\n            startDateTime.setHours(startHours, startMinutes, 0);\n            \n            // Calculate end time based on selected duration\n            const endDateTime = new Date(startDateTime);\n            endDateTime.setMinutes(startDateTime.getMinutes() + parseInt(durationMinutes));\n            \n            const formattedEndTime = endDateTime.getHours().toString().padStart(2, '0') + ':' + \n                                  endDateTime.getMinutes().toString().padStart(2, '0');\n            \n            console.log(\"Calculated end time:\", formattedEndTime);\n            \n            // Call the existing scheduleBreak function\n            window.scheduleBreak(startTime, formattedEndTime);\n          };\n          \n          window.cancelDurationSelection = function(selectorId) {\n            console.log(\"Canceling duration selection for\", selectorId);\n            const durationSelector = document.getElementById(selectorId);\n            if (durationSelector) {\n              durationSelector.style.display = 'none';\n            } else {\n              console.error(\"Duration selector element not found:\", selectorId);\n            }\n          };\n          \n          console.log(\"Inline scheduling functions defined and attached to window object\");\n        `\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: \"true\",\n      children: `\n        .success-message {\n          white-space: pre-line;\n          line-height: 1.5;\n          padding: 15px;\n          border-radius: 8px;\n          background-color: #f5f5f5;\n          margin: 15px 0;\n        }\n        \n        .success-message b {\n          font-weight: 600;\n        }\n        \n        .time-slot {\n          font-weight: 500;\n          color: #1a73e8;\n        }\n        \n        .free-time-card {\n          background-color: #e8f5e9;\n          border-radius: 8px;\n          padding: 15px;\n          margin: 10px 0;\n        }\n        \n        .free-time-actions {\n          display: flex;\n          gap: 10px;\n          margin-top: 15px;\n        }\n        \n        .action-button {\n          background-color: #4caf50;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          padding: 8px 16px;\n          cursor: pointer;\n          font-size: 14px;\n          transition: background-color 0.3s;\n        }\n        \n        .action-button:hover {\n          background-color: #388e3c;\n        }\n        \n        .action-button.small {\n          padding: 4px 12px;\n          font-size: 12px;\n        }\n        \n        .slot-item {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 6px 10px;\n          margin: 8px 0;\n          background-color: #f0f8ff;\n          border-radius: 4px;\n        }\n        \n        .duration-selector {\n          background-color: #f9f9f9;\n          border-radius: 6px;\n          padding: 12px;\n          margin-top: 10px;\n          border: 1px solid #ddd;\n        }\n        \n        .duration-selector input[type=\"range\"] {\n          width: 100%;\n          margin: 10px 0;\n        }\n        \n        .action-button.secondary {\n          background-color: #9e9e9e;\n        }\n        \n        .action-button.secondary:hover {\n          background-color: #757575;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 787,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NaturalLanguageForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 870,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 871,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 679,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"NaturalLanguageForm\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","jsxDEV","_jsxDEV","setupGlobalFunctions","window","scheduleBreak","startTime","endTime","console","log","dispatchEvent","CustomEvent","detail","type","scheduleTask","NaturalLanguageForm","_s","text","setText","loading","setLoading","message","setMessage","error","setError","availableSlots","setAvailableSlots","calendarEvents","setCalendarEvents","existingEvents","setExistingEvents","showCalendar","setShowCalendar","eventDetails","setEventDetails","selectedSlots","setSelectedSlots","calendars","setCalendars","selectedCalendars","setSelectedCalendars","dateRange","setDateRange","start","Date","end","setDate","getDate","handleSubmit","e","preventDefault","trim","response","post","data","success","humanizedResponse","intent","setTimeout","messageElement","document","querySelector","innerHTML","events","insufficientTime","requestedHours","foundHours","summary","getEventSummaryFromText","description","calendarId","eventLink","_error$response","_error$response$data","handleScheduleItem","event","startDate","formattedDate","toLocaleDateString","month","day","year","newText","taskName","prompt","addEventListener","removeEventListener","fetchData","calendarsResponse","get","catch","Error","allCalendars","prefsResponse","preferredCals","length","syncedPrefs","map","pref","find","cal","id","primaryCal","primary","sendPreferences","fetchExistingEvents","formatDate","endDate","eventsWithMetadata","existingEvent","backgroundColor","getCalendarColor","borderColor","textColor","darker","calendar","darkenColor","color","amount","replace","r","parseInt","substring","g","b","Math","max","floor","toString","padStart","date","d","getMonth","getFullYear","join","handleCalendarSelect","prev","some","selected","filter","firstSentence","split","handleEventClick","info","extendedProps","suggestedSlot","eventData","toISOString","isAlreadySelected","slot","isSelected","setProp","eventTitle","title","eventTime","toLocaleTimeString","calendarName","alert","calculateTotalHours","totalMinutes","forEach","diffMinutes","hours","minutes","handleScheduleSelected","promises","selectedSlot","results","Promise","all","allSuccessful","every","_error$response2","_error$response2$data","handleFindDifferentTimes","handleDatesSet","dateInfo","getAllEvents","allEvents","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","margin","checked","onChange","disabled","dangerouslySetInnerHTML","__html","onSubmit","value","target","rows","placeholder","required","border","plugins","initialView","headerToolbar","left","center","right","eventClick","eventContent","renderEventContent","height","nowIndicator","datesSet","slotMinTime","slotMaxTime","eventTimeFormat","hour","minute","meridiem","slotLabelFormat","hour12","allDaySlot","onClick","_c","eventInfo","isSuggested","isExisting","timeText","includes","times","App","jsx","_c2","$RefreshReg$"],"sources":["/Users/Rushik/Documents/Projects/caledar-example/Calendar-app-latest-working/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\n\n// Define the script at global level to ensure the functions are globally accessible\nconst setupGlobalFunctions = () => {\n  if (typeof window !== 'undefined') {\n    // Create a custom event for scheduling breaks\n    window.scheduleBreak = (startTime, endTime) => {\n      console.log(\"scheduleBreak called with:\", startTime, endTime);\n      // Dispatch a custom event that the React component can listen for\n      window.dispatchEvent(\n        new CustomEvent('scheduleCalendarItem', {\n          detail: {\n            type: 'break',\n            startTime,\n            endTime\n          }\n        })\n      );\n    };\n    \n    // Create a custom event for scheduling tasks  \n    window.scheduleTask = (startTime, endTime) => {\n      console.log(\"scheduleTask called with:\", startTime, endTime);\n      window.dispatchEvent(\n        new CustomEvent('scheduleCalendarItem', {\n          detail: {\n            type: 'task',\n            startTime,\n            endTime\n          }\n        })\n      );\n    };\n    \n    // Log to verify functions are attached\n    console.log(\"Global scheduling functions attached:\", \n      typeof window.scheduleBreak === 'function', \n      typeof window.scheduleTask === 'function');\n  }\n};\n\nfunction NaturalLanguageForm() {\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  // eslint-disable-next-line no-unused-vars\n  const [availableSlots, setAvailableSlots] = useState([]);\n  const [calendarEvents, setCalendarEvents] = useState([]);\n  const [existingEvents, setExistingEvents] = useState([]);\n  const [showCalendar, setShowCalendar] = useState(false);\n  const [eventDetails, setEventDetails] = useState({});\n  const [selectedSlots, setSelectedSlots] = useState([]);\n  \n  // Call the setup function on load\n  useEffect(() => {\n    setupGlobalFunctions();\n  }, []);\n  \n  const [calendars, setCalendars] = useState([]);\n  const [selectedCalendars, setSelectedCalendars] = useState([]);\n  const [dateRange, setDateRange] = useState({\n    start: new Date(),\n    end: new Date(new Date().setDate(new Date().getDate() + 7))\n  });\n\n  // Define handleSubmit with useCallback before it's used in handleScheduleItem\n  const handleSubmit = useCallback(async (e) => {\n    e.preventDefault();\n    console.log(\"handleSubmit called with text:\", text);\n    if (!text.trim()) return;\n\n    setLoading(true);\n    setError(\"\");\n    setMessage(\"\");\n    setAvailableSlots([]);\n    setCalendarEvents([]);\n    setSelectedSlots([]);\n    setShowCalendar(false);\n\n    try {\n      console.log(\"Making API call with text:\", text);\n      const response = await axios.post('http://127.0.0.1:5000/api/natural-language-event', {\n        text\n      });\n      console.log(\"API response:\", response.data);\n\n      if (response.data.success) {\n        // Use humanizedResponse from backend if available\n        if (response.data.humanizedResponse) {\n          if (response.data.intent === \"check_free_time\") {\n            // For check_free_time intent, we need to render HTML\n            setMessage('');\n            // Use a timeout to ensure state updates don't conflict\n            setTimeout(() => {\n              const messageElement = document.querySelector('.success-message');\n              if (messageElement) {\n                messageElement.innerHTML = response.data.humanizedResponse;\n              } else {\n                // Fallback in case the element isn't found\n                setMessage(response.data.humanizedResponse);\n              }\n            }, 10);\n            setText(\"\");\n          } else {\n            // For other intents, just set the text message\n            setMessage(response.data.humanizedResponse);\n          }\n        }\n        \n        if (response.data.intent === \"find_time\") {\n          setAvailableSlots(response.data.availableSlots);\n          setCalendarEvents(response.data.events || []);\n          setShowCalendar(true);\n          \n          // Check if we have the insufficientTime flag\n          if (response.data.insufficientTime) {\n            // eslint-disable-next-line no-unused-vars\n            const requestedHours = response.data.requestedHours;\n            // eslint-disable-next-line no-unused-vars\n            const foundHours = response.data.foundHours;\n            // Use the humanizedResponse for error message if available\n            setError(`INSUFFICIENT TIME: ${response.data.humanizedResponse || response.data.message} Select these slots or try a different timeframe.`);\n          } else if (!response.data.humanizedResponse) {\n            // Only set this default message if humanizedResponse wasn't already set\n            setMessage(\"Here are suggested time slots on your calendar. Click on slots to select/deselect them for scheduling.\");\n          }\n          \n          setEventDetails({\n            summary: getEventSummaryFromText(text),\n            description: text,\n            calendarId: \"primary\"\n          });\n        } else if (response.data.intent === \"view_events\") {\n          // Just display the humanized response for view_events, no calendar needed\n          setText(\"\");\n        } else if (response.data.intent === \"Create event\" && !response.data.humanizedResponse) {\n          // Fallback for create event if no humanizedResponse is available\n          setMessage(`Event created! ${response.data.eventLink ? `View it here: ${response.data.eventLink}` : ''}`);\n          setText(\"\");\n        } else {\n          // For other intents or if we already set humanizedResponse\n          setText(\"\");\n        }\n      } else {\n        setError(`Error: ${response.data.humanizedResponse || response.data.message}`);\n      }\n    } catch (error) {\n      setError(`Error: ${error.response?.data?.message || error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  }, [text, setLoading, setError, setMessage, setAvailableSlots, setCalendarEvents, \n      setSelectedSlots, setShowCalendar, setText, setEventDetails]);\n\n  // Event handler for scheduling items - using useCallback to avoid dependency issues\n  const handleScheduleItem = useCallback((event) => {\n    console.log(\"Custom event received:\", event.detail);\n    const { type, startTime, endTime } = event.detail;\n    const startDate = new Date();\n    const formattedDate = startDate.toLocaleDateString('en-US', { \n      month: 'long', \n      day: 'numeric',\n      year: 'numeric'\n    });\n    \n    if (type === 'break') {\n      const newText = `Schedule a break on ${formattedDate} from ${startTime} to ${endTime}`;\n      console.log(\"Setting text for break:\", newText);\n      setText(newText);\n      // Submit after React has updated the state\n      setTimeout(() => {\n        handleSubmit({ preventDefault: () => {} });\n      }, 50);\n    } else if (type === 'task') {\n      // Show prompt for task name\n      const taskName = prompt(\"What would you like to name this task?\", \"Work Session\");\n      if (taskName) {\n        const newText = `Schedule ${taskName} on ${formattedDate} from ${startTime} to ${endTime}`;\n        console.log(\"Setting text for task:\", newText);\n        setText(newText);\n        // Submit after React has updated the state\n        setTimeout(() => {\n          handleSubmit({ preventDefault: () => {} });\n        }, 50);\n      }\n    }\n  }, [setText, handleSubmit]);\n  \n  // Set up event listeners\n  useEffect(() => {\n    window.addEventListener('scheduleCalendarItem', handleScheduleItem);\n    \n    // Clean up event listener\n    return () => {\n      window.removeEventListener('scheduleCalendarItem', handleScheduleItem);\n    };\n  }, [handleScheduleItem]);\n\n  // Fetch all calendars and current preferences on mount\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        console.log(\"Attempting to fetch calendars...\");\n        // Fetch all calendars\n        const calendarsResponse = await axios.get('http://127.0.0.1:5000/api/get-calendars')\n          .catch(error => {\n            console.error(\"Calendar fetch error details:\", error.message);\n            if (error.response) console.error(\"Response data:\", error.response.data);\n            throw new Error(`Failed to fetch calendars: ${error.message}`);\n          });\n        \n        console.log(\"Calendars response:\", calendarsResponse);\n        if (!calendarsResponse.data.success) {\n          throw new Error(`Failed to fetch calendars: ${calendarsResponse.data.message || 'Unknown error'}`);\n        }\n        const allCalendars = calendarsResponse.data.calendars;\n        setCalendars(allCalendars);\n\n        console.log(\"Attempting to fetch preferred calendars...\");\n        // Fetch current preferred calendars\n        const prefsResponse = await axios.get('http://127.0.0.1:5000/api/get-preferred-calendars')\n          .catch(error => {\n            console.error(\"Preferences fetch error details:\", error.message);\n            if (error.response) console.error(\"Response data:\", error.response.data);\n            throw new Error(`Failed to fetch preferred calendars: ${error.message}`);\n          });\n        \n        console.log(\"Preferences response:\", prefsResponse);\n        if (!prefsResponse.data.success) {\n          throw new Error(`Failed to fetch preferred calendars: ${prefsResponse.data.message || 'Unknown error'}`);\n        }\n        const preferredCals = prefsResponse.data.calendars;\n\n        // If there are saved preferences, use them; otherwise, default to primary\n        if (preferredCals.length > 0) {\n          // Ensure the saved preferences match the full calendar data (e.g., include all fields)\n          const syncedPrefs = preferredCals.map(pref => \n            allCalendars.find(cal => cal.id === pref.id) || pref\n          );\n          setSelectedCalendars(syncedPrefs);\n        } else {\n          const primaryCal = allCalendars.find(cal => cal.primary);\n          if (primaryCal) {\n            setSelectedCalendars([primaryCal]);\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError(`Error loading calendars or preferences: ${error.message}`);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Send preferences to backend only when user changes them\n  useEffect(() => {\n    if (selectedCalendars.length > 0) {\n      const sendPreferences = async () => {\n        try {\n          const response = await axios.post('http://127.0.0.1:5000/api/set-preferred-calendars', {\n            calendars: selectedCalendars\n          });\n          if (!response.data.success) {\n            throw new Error(response.data.message);\n          }\n        } catch (error) {\n          console.error('Error setting preferred calendars:', error);\n          setError('Error saving calendar preferences.');\n        }\n      };\n      sendPreferences();\n    }\n  }, [selectedCalendars]);\n\n  const fetchExistingEvents = useCallback(async () => {\n    try {\n      const startDate = formatDate(dateRange.start);\n      const endDate = formatDate(dateRange.end);\n      const response = await axios.get(`http://127.0.0.1:5000/api/get-events?start=${startDate}&end=${endDate}`);\n      \n      if (response.data.success) {\n        // Make sure each event has existingEvent flag and preserve calendar color\n        const eventsWithMetadata = response.data.events.map(event => ({\n          ...event,\n          existingEvent: true,\n          // If the event doesn't already have these properties, add them\n          backgroundColor: event.backgroundColor || getCalendarColor(event.calendarId),\n          borderColor: event.borderColor || getCalendarColor(event.calendarId, true),\n          textColor: event.textColor || '#ffffff'\n        }));\n        setExistingEvents(eventsWithMetadata);\n      } else {\n        console.error('Error fetching events:', response.data.message);\n      }\n    } catch (error) {\n      console.error('Error fetching events:', error);\n    }\n  }, [dateRange, calendars]);\n\n  // Helper function to get color for a specific calendar\n  const getCalendarColor = (calendarId, darker = false) => {\n    // Find the calendar in our list\n    const calendar = calendars.find(cal => cal.id === calendarId);\n    if (calendar && calendar.backgroundColor) {\n      if (darker) {\n        // Create a slightly darker version for the border\n        return darkenColor(calendar.backgroundColor, 0.2);\n      }\n      return calendar.backgroundColor;\n    }\n    // Default color if calendar not found\n    return darker ? '#1a73e8' : '#4285f4';\n  };\n\n  // Helper function to darken a color\n  const darkenColor = (color, amount) => {\n    try {\n      // Remove the hash if it exists\n      color = color.replace('#', '');\n      \n      // Parse the color\n      let r = parseInt(color.substring(0, 2), 16);\n      let g = parseInt(color.substring(2, 4), 16);\n      let b = parseInt(color.substring(4, 6), 16);\n      \n      // Darken the color\n      r = Math.max(0, Math.floor(r * (1 - amount)));\n      g = Math.max(0, Math.floor(g * (1 - amount)));\n      b = Math.max(0, Math.floor(b * (1 - amount)));\n      \n      // Convert back to hex\n      return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n    } catch (e) {\n      console.error('Error darkening color:', e);\n      return color; // Return original color if there's an error\n    }\n  };\n\n  // Fetch existing events when dateRange changes or when viewing calendar\n  useEffect(() => {\n    if (showCalendar) {\n      fetchExistingEvents();\n    }\n  }, [dateRange, showCalendar, fetchExistingEvents]);\n\n  const formatDate = (date) => {\n    const d = new Date(date);\n    let month = '' + (d.getMonth() + 1);\n    let day = '' + d.getDate();\n    const year = d.getFullYear();\n\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n\n    return [year, month, day].join('-');\n  };\n\n  const handleCalendarSelect = (cal) => {\n    setSelectedCalendars((prev) => {\n      if (prev.some((selected) => selected.id === cal.id)) {\n        return prev.filter((selected) => selected.id !== cal.id);\n      } else {\n        return [...prev, cal];\n      }\n    });\n  };\n\n  const getEventSummaryFromText = (text) => {\n    const firstSentence = text.split('.')[0];\n    if (firstSentence.length <= 50) return firstSentence;\n    return firstSentence.substring(0, 50) + '...';\n  };\n\n  const handleEventClick = (info) => {\n    const { event } = info;\n    \n    // Only handle suggested slots\n    if (event.extendedProps.suggestedSlot) {\n      const eventData = {\n        start: event.start.toISOString(),\n        end: event.end.toISOString()\n      };\n      \n      // Toggle selection\n      setSelectedSlots(prev => {\n        const isAlreadySelected = prev.some(slot => \n          slot.start === eventData.start && slot.end === eventData.end\n        );\n        \n        if (isAlreadySelected) {\n          // Remove from selection\n          return prev.filter(slot => \n            !(slot.start === eventData.start && slot.end === eventData.end)\n          );\n        } else {\n          // Add to selection\n          return [...prev, eventData];\n        }\n      });\n      \n      // Update event color based on selection\n      const isSelected = !selectedSlots.some(slot => \n        slot.start === eventData.start && slot.end === eventData.end\n      );\n      \n      if (isSelected) {\n        event.setProp('backgroundColor', '#4caf50');\n        event.setProp('borderColor', '#2e7d32');\n        event.setProp('title', 'Selected Time');\n      } else {\n        event.setProp('backgroundColor', '#8bc34a');\n        event.setProp('borderColor', '#689f38');\n        event.setProp('title', 'Suggested Time');\n      }\n    } else {\n      // For existing events, show some details in a tooltip or alert\n      const eventTitle = event.title;\n      const eventTime = `${event.start.toLocaleTimeString()} - ${event.end.toLocaleTimeString()}`;\n      const calendarName = event.extendedProps.calendarName || 'Unknown Calendar';\n      \n      // Simple alert for demonstration - in a real app, you might want a tooltip or modal\n      alert(`Event: ${eventTitle}\\nTime: ${eventTime}\\nCalendar: ${calendarName}`);\n    }\n  };\n\n  const calculateTotalHours = () => {\n    let totalMinutes = 0;\n    selectedSlots.forEach(slot => {\n      const start = new Date(slot.start);\n      const end = new Date(slot.end);\n      const diffMinutes = (end - start) / (1000 * 60);\n      totalMinutes += diffMinutes;\n    });\n    const hours = Math.floor(totalMinutes / 60);\n    const minutes = Math.floor(totalMinutes % 60);\n    return `${hours}h ${minutes}m`;\n  };\n\n  const handleScheduleSelected = async () => {\n    if (selectedSlots.length === 0) return;\n\n    setLoading(true);\n    try {\n      // Create multiple events, one for each selected slot\n      const promises = selectedSlots.map(slot => {\n        return axios.post('http://127.0.0.1:5000/api/schedule-selected-slot', {\n          selectedSlot: slot,\n          eventDetails\n        });\n      });\n      \n      const results = await Promise.all(promises);\n      const allSuccessful = results.every(r => r.data.success);\n      \n      if (allSuccessful) {\n        setMessage(`All ${selectedSlots.length} events scheduled successfully!`);\n        setText(\"\");\n        setShowCalendar(false);\n        setAvailableSlots([]);\n        setCalendarEvents([]);\n        setSelectedSlots([]);\n      } else {\n        setError(`Error: Some events could not be scheduled.`);\n      }\n    } catch (error) {\n      setError(`Error: ${error.response?.data?.message || error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFindDifferentTimes = () => {\n    setMessage(\"Let's find another time. Please provide more details:\");\n    setShowCalendar(false);\n    setAvailableSlots([]);\n    setCalendarEvents([]);\n    setSelectedSlots([]);\n  };\n  \n  const handleDatesSet = (dateInfo) => {\n    setDateRange({\n      start: dateInfo.start,\n      end: dateInfo.end\n    });\n  };\n  \n  const getAllEvents = () => {\n    // Start with existing events, preserving their properties\n    const allEvents = [...existingEvents];\n    \n    // Add suggested slots with updated colors based on selection\n    if (calendarEvents.length > 0) {\n      calendarEvents.forEach(event => {\n        const isSelected = selectedSlots.some(slot => \n          slot.start === event.start && slot.end === event.end\n        );\n        \n        allEvents.push({\n          ...event,\n          backgroundColor: isSelected ? '#4caf50' : '#8bc34a',\n          borderColor: isSelected ? '#2e7d32' : '#689f38',\n          textColor: '#ffffff',\n          title: isSelected ? 'Selected Time' : 'Suggested Time',\n          suggestedSlot: true // Mark as suggested slot for the event click handler\n        });\n      });\n    }\n    \n    return allEvents;\n  };\n\n  return (\n    <div className=\"natural-language-form\">\n      <h2>Create Event with Natural Language</h2>\n\n      <div className=\"calendar-selection\">\n        <h3>Select Calendars to Monitor:</h3>\n        {calendars.length > 0 ? (\n          calendars.map((cal) => (\n            <label key={cal.id} style={{ display: 'block', margin: '5px 0' }}>\n              <input\n                type=\"checkbox\"\n                checked={selectedCalendars.some((selected) => selected.id === cal.id)}\n                onChange={() => handleCalendarSelect(cal)}\n                disabled={loading}\n              />\n              {cal.summary} {cal.primary ? '(Primary)' : ''}\n            </label>\n          ))\n        ) : (\n          <p>Loading calendars...</p>\n        )}\n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n      {message && <div className=\"success-message\" dangerouslySetInnerHTML={{ __html: message }} />}\n\n      {!showCalendar ? (\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label>Describe your event:</label>\n            <textarea\n              value={text}\n              onChange={(e) => setText(e.target.value)}\n              disabled={loading}\n              rows={3}\n              placeholder=\"e.g., 'Schedule a team meeting next Tuesday at 2pm' or 'Find me time to work on my project tomorrow afternoon'\"\n              required\n            />\n          </div>\n          <button type=\"submit\" disabled={loading} className=\"submit-button\">\n            {loading ? 'Processing...' : 'Submit'}\n          </button>\n        </form>\n      ) : (\n        <div className=\"calendar-view\">\n          {selectedSlots.length > 0 && (\n            <div className=\"selection-summary\">\n              <p>Selected {selectedSlots.length} slot(s) - Total time: {calculateTotalHours()}</p>\n            </div>\n          )}\n          <div className=\"calendar-legend\">\n            {/* Legend for suggested/selected slots */}\n            <div className=\"legend-section\">\n              <div className=\"legend-item\">\n                <span className=\"legend-color suggested-event-color\"></span>\n                <span>Suggested Work Slots</span>\n              </div>\n              <div className=\"legend-item\">\n                <span className=\"legend-color selected-event-color\"></span>\n                <span>Selected Work Slots</span>\n              </div>\n            </div>\n            \n            {/* Legend for calendars */}\n            <div className=\"legend-section\">\n              <div className=\"legend-title\">Your Calendars:</div>\n              {selectedCalendars.map(cal => (\n                <div className=\"legend-item\" key={cal.id}>\n                  <span \n                    className=\"legend-color\" \n                    style={{ \n                      backgroundColor: cal.backgroundColor || getCalendarColor(cal.id),\n                      border: `1px solid ${cal.borderColor || getCalendarColor(cal.id, true)}`\n                    }}\n                  ></span>\n                  <span>{cal.summary}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"calendar-container\">\n            <FullCalendar\n              plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\n              initialView=\"timeGridWeek\"\n              headerToolbar={{\n                left: 'prev,next today',\n                center: 'title',\n                right: 'dayGridMonth,timeGridWeek,timeGridDay'\n              }}\n              events={getAllEvents()}\n              eventClick={handleEventClick}\n              eventContent={renderEventContent}\n              height=\"800px\"\n              nowIndicator={true}\n              datesSet={handleDatesSet}\n              slotMinTime=\"00:00:00\"\n              slotMaxTime=\"24:00:00\"\n              eventTimeFormat={{\n                hour: 'numeric',\n                minute: '2-digit',\n                meridiem: 'short'\n              }}\n              slotLabelFormat={{\n                hour: 'numeric',\n                minute: '2-digit',\n                hour12: true\n              }}\n              allDaySlot={false}\n            />\n          </div>\n          <div className=\"calendar-actions\">\n            <button\n              onClick={handleScheduleSelected}\n              disabled={selectedSlots.length === 0 || loading}\n              className=\"confirm-button\"\n            >\n              {loading ? 'Scheduling...' : `Schedule ${selectedSlots.length} Selected Time${selectedSlots.length === 1 ? '' : 's'}`}\n            </button>\n            <button\n              onClick={handleFindDifferentTimes}\n              disabled={loading}\n              className=\"reject-button\"\n            >\n              Find Different Times\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction renderEventContent(eventInfo) {\n  const isSuggested = eventInfo.event.extendedProps.suggestedSlot;\n  const isExisting = eventInfo.event.extendedProps.existingEvent;\n  \n  // Format the time more cleanly\n  let timeText = eventInfo.timeText;\n  if (timeText.includes('-')) {\n    // Simplify time range display\n    const times = timeText.split('-');\n    timeText = times[0].trim() + ' - ' + times[1].trim();\n  }\n  \n  // Get the calendar name if available\n  let calendarName = '';\n  if (isExisting && eventInfo.event.extendedProps.calendarName) {\n    calendarName = `(${eventInfo.event.extendedProps.calendarName})`;\n  }\n  \n  return (\n    <div className={`event-content ${isSuggested ? 'suggested-event' : 'existing-event'}`}>\n      <b>{timeText}</b>\n      <i>{eventInfo.event.title} {calendarName}</i>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <script dangerouslySetInnerHTML={{\n        __html: `\n          // Directly define functions in the global scope\n          window.scheduleBreak = function(startTime, endTime) {\n            console.log(\"DOM scheduleBreak called with:\", startTime, endTime);\n            if (window.dispatchEvent) {\n              window.dispatchEvent(\n                new CustomEvent('scheduleCalendarItem', {\n                  detail: {\n                    type: 'break',\n                    startTime,\n                    endTime\n                  }\n                })\n              );\n            }\n          };\n          \n          window.scheduleTask = function(startTime, endTime) {\n            console.log(\"DOM scheduleTask called with:\", startTime, endTime);\n            if (window.dispatchEvent) {\n              window.dispatchEvent(\n                new CustomEvent('scheduleCalendarItem', {\n                  detail: {\n                    type: 'task',\n                    startTime,\n                    endTime\n                  }\n                })\n              );\n            }\n          };\n          \n          // Duration selector functions\n          window.showDurationSelector = function(startTime, endTime, selectorId, displayId, sliderId) {\n            console.log(\"Showing duration selector\", selectorId);\n            const durationSelector = document.getElementById(selectorId);\n            if (durationSelector) {\n              durationSelector.style.display = 'block';\n            } else {\n              console.error(\"Duration selector element not found:\", selectorId);\n            }\n          };\n          \n          window.updateDurationDisplay = function(minutes, displayId) {\n            console.log(\"Updating duration display to\", minutes, \"for\", displayId);\n            const durationDisplay = document.getElementById(displayId);\n            if (!durationDisplay) {\n              console.error(\"Duration display element not found:\", displayId);\n              return;\n            }\n            \n            let display = \"\";\n            if (minutes >= 60) {\n              const hours = Math.floor(minutes / 60);\n              const remainingMinutes = minutes % 60;\n              display = hours + \" hour\" + (hours > 1 ? \"s\" : \"\");\n              if (remainingMinutes > 0) {\n                display += \" \" + remainingMinutes + \" min\";\n              }\n            } else {\n              display = minutes + \" min\";\n            }\n            durationDisplay.textContent = display;\n          };\n          \n          window.scheduleBreakWithDuration = function(startTime, endTime, sliderId) {\n            console.log(\"Scheduling break with duration using slider\", sliderId);\n            const durationSlider = document.getElementById(sliderId);\n            if (!durationSlider) {\n              console.error(\"Duration slider not found:\", sliderId);\n              return;\n            }\n            \n            const durationMinutes = durationSlider.value;\n            console.log(\"Duration selected:\", durationMinutes);\n            \n            const startDateTime = new Date();\n            const [startHours, startMinutes] = startTime.split(':').map(Number);\n            startDateTime.setHours(startHours, startMinutes, 0);\n            \n            // Calculate end time based on selected duration\n            const endDateTime = new Date(startDateTime);\n            endDateTime.setMinutes(startDateTime.getMinutes() + parseInt(durationMinutes));\n            \n            const formattedEndTime = endDateTime.getHours().toString().padStart(2, '0') + ':' + \n                                  endDateTime.getMinutes().toString().padStart(2, '0');\n            \n            console.log(\"Calculated end time:\", formattedEndTime);\n            \n            // Call the existing scheduleBreak function\n            window.scheduleBreak(startTime, formattedEndTime);\n          };\n          \n          window.cancelDurationSelection = function(selectorId) {\n            console.log(\"Canceling duration selection for\", selectorId);\n            const durationSelector = document.getElementById(selectorId);\n            if (durationSelector) {\n              durationSelector.style.display = 'none';\n            } else {\n              console.error(\"Duration selector element not found:\", selectorId);\n            }\n          };\n          \n          console.log(\"Inline scheduling functions defined and attached to window object\");\n        `\n      }} />\n      <style jsx=\"true\">{`\n        .success-message {\n          white-space: pre-line;\n          line-height: 1.5;\n          padding: 15px;\n          border-radius: 8px;\n          background-color: #f5f5f5;\n          margin: 15px 0;\n        }\n        \n        .success-message b {\n          font-weight: 600;\n        }\n        \n        .time-slot {\n          font-weight: 500;\n          color: #1a73e8;\n        }\n        \n        .free-time-card {\n          background-color: #e8f5e9;\n          border-radius: 8px;\n          padding: 15px;\n          margin: 10px 0;\n        }\n        \n        .free-time-actions {\n          display: flex;\n          gap: 10px;\n          margin-top: 15px;\n        }\n        \n        .action-button {\n          background-color: #4caf50;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          padding: 8px 16px;\n          cursor: pointer;\n          font-size: 14px;\n          transition: background-color 0.3s;\n        }\n        \n        .action-button:hover {\n          background-color: #388e3c;\n        }\n        \n        .action-button.small {\n          padding: 4px 12px;\n          font-size: 12px;\n        }\n        \n        .slot-item {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 6px 10px;\n          margin: 8px 0;\n          background-color: #f0f8ff;\n          border-radius: 4px;\n        }\n        \n        .duration-selector {\n          background-color: #f9f9f9;\n          border-radius: 6px;\n          padding: 12px;\n          margin-top: 10px;\n          border: 1px solid #ddd;\n        }\n        \n        .duration-selector input[type=\"range\"] {\n          width: 100%;\n          margin: 10px 0;\n        }\n        \n        .action-button.secondary {\n          background-color: #9e9e9e;\n        }\n        \n        .action-button.secondary:hover {\n          background-color: #757575;\n        }\n      `}</style>\n      <NaturalLanguageForm />\n      <hr />\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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EAAE,iBAAiB6C,WAAW,GAAG,iBAAiB,GAAG,gBAAgB,EAAG;IAAA5C,QAAA,gBACpFnL,OAAA;MAAAmL,QAAA,EAAI8C;IAAQ;MAAA7C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACjBvL,OAAA;MAAAmL,QAAA,GAAI2C,SAAS,CAACrJ,KAAK,CAAC8E,KAAK,EAAC,GAAC,EAACG,YAAY;IAAA;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC1C,CAAC;AAEV;AAEA,SAAS6C,GAAGA,CAAA,EAAG;EACb,oBACEpO,OAAA;IAAKkL,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBnL,OAAA;MAAQ8L,uBAAuB,EAAE;QAC/BC,MAAM,EAAE;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACM;IAAE;MAAAX,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACLvL,OAAA;MAAOqO,GAAG,EAAC,MAAM;MAAAlD,QAAA,EAAE;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eACVvL,OAAA,CAACa,mBAAmB;MAAAuK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACvBvL,OAAA;MAAAoL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC+C,GAAA,GArMQF,GAAG;AAuMZ,eAAeA,GAAG;AAAC,IAAAP,EAAA,EAAAS,GAAA;AAAAC,YAAA,CAAAV,EAAA;AAAAU,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}